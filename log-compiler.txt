src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::search_preassigned(int64_t, const float*, int64_t, const int64_t*, const float*, float*, int64_t*, bool, const IVFSearchParameters*, vindex::IndexIVFStats*) const’:
src/IndexIVF.cpp:439:9: error: ‘ScopeDeleter1’ was not declared in this scope
  439 |         ScopeDeleter1<InvertedListScanner> del(scanner);
      |         ^~~~~~~~~~~~~
src/IndexIVF.cpp:439:42: error: expected primary-expression before ‘>’ token
  439 |         ScopeDeleter1<InvertedListScanner> del(scanner);
      |                                          ^
src/IndexIVF.cpp:439:44: error: ‘del’ was not declared in this scope; did you mean ‘sel’?
  439 |         ScopeDeleter1<InvertedListScanner> del(scanner);
      |                                            ^~~
      |                                            sel
src/IndexIVF.cpp: In lambda function:
src/IndexIVF.cpp:502:20: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  502 |             scanner->set_list(key, coarse_dis_i);
      |                    ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:513:37: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  513 |                     nheap += scanner->iterate_codes(
      |                                     ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:547:37: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  547 |                     nheap += scanner->scan_codes(
      |                                     ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:555:25: error: ‘demangle_cpp_symbol’ was not declared in this scope
  555 |                         demangle_cpp_symbol(typeid(e).name()) + "  " + e.what();
      |                         ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::search_preassigned(int64_t, const float*, int64_t, const int64_t*, const float*, float*, int64_t*, bool, const IVFSearchParameters*, vindex::IndexIVFStats*) const’:
src/IndexIVF.cpp:573:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  573 |                 scanner->set_query(x + i * d);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:607:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  607 |                 scanner->set_query(x + i * d);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:652:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  652 |                 scanner->set_query(x + i * d);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::range_search_preassigned(int64_t, const float*, float, const int64_t*, const float*, vindex::RangeSearchResult*, bool, const IVFSearchParameters*, vindex::IndexIVFStats*) const’:
src/IndexIVF.cpp:762:17: error: ‘RangeSearchPartialResult’ was not declared in this scope; did you mean ‘RangeSearchResult’?
  762 |     std::vector<RangeSearchPartialResult*> all_pres(omp_get_max_threads());
      |                 ^~~~~~~~~~~~~~~~~~~~~~~~
      |                 RangeSearchResult
src/IndexIVF.cpp:762:42: error: template argument 1 is invalid
  762 |     std::vector<RangeSearchPartialResult*> all_pres(omp_get_max_threads());
      |                                          ^
src/IndexIVF.cpp:762:42: error: template argument 2 is invalid
src/IndexIVF.cpp:774:33: error: expected ‘;’ before ‘pres’
  774 |         RangeSearchPartialResult pres(result);
      |                                 ^~~~~
      |                                 ;
src/IndexIVF.cpp:778:17: error: invalid types ‘int[int]’ for array subscript
  778 |         all_pres[omp_get_thread_num()] = &pres;
      |                 ^
src/IndexIVF.cpp:778:43: error: ‘pres’ was not declared in this scope
  778 |         all_pres[omp_get_thread_num()] = &pres;
      |                                           ^~~~
src/IndexIVF.cpp:782:56: error: ‘RangeQueryResult’ has not been declared
  782 |         auto scan_list_func = [&](size_t i, size_t ik, RangeQueryResult& qres) {
      |                                                        ^~~~~~~~~~~~~~~~
src/IndexIVF.cpp: In lambda function:
src/IndexIVF.cpp:799:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  799 |                 scanner->set_list(key, coarse_dis[i * nprobe + ik]);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:804:28: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  804 |                     scanner->iterate_codes_range(
      |                            ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:811:28: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  811 |                     scanner->scan_codes_range(
      |                            ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:819:25: error: ‘demangle_cpp_symbol’ was not declared in this scope
  819 |                         demangle_cpp_symbol(typeid(e).name()) + "  " + e.what();
      |                         ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::range_search_preassigned(int64_t, const float*, float, const int64_t*, const float*, vindex::RangeSearchResult*, bool, const IVFSearchParameters*, vindex::IndexIVFStats*) const’:
src/IndexIVF.cpp:827:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  827 |                 scanner->set_query(x + i * d);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:829:17: error: ‘RangeQueryResult’ was not declared in this scope; did you mean ‘RangeSearchResult’?
  829 |                 RangeQueryResult& qres = pres.new_result(i);
      |                 ^~~~~~~~~~~~~~~~
      |                 RangeSearchResult
src/IndexIVF.cpp:829:35: error: ‘qres’ was not declared in this scope
  829 |                 RangeQueryResult& qres = pres.new_result(i);
      |                                   ^~~~
src/IndexIVF.cpp:838:24: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  838 |                 scanner->set_query(x + i * d);
      |                        ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:840:17: error: ‘RangeQueryResult’ was not declared in this scope; did you mean ‘RangeSearchResult’?
  840 |                 RangeQueryResult& qres = pres.new_result(i);
      |                 ^~~~~~~~~~~~~~~~
      |                 RangeSearchResult
src/IndexIVF.cpp:840:35: error: ‘qres’ was not declared in this scope
  840 |                 RangeQueryResult& qres = pres.new_result(i);
      |                                   ^~~~
src/IndexIVF.cpp:848:13: error: ‘RangeQueryResult’ was not declared in this scope; did you mean ‘RangeSearchResult’?
  848 |             RangeQueryResult* qres = nullptr;
      |             ^~~~~~~~~~~~~~~~
      |             RangeSearchResult
src/IndexIVF.cpp:848:31: error: ‘qres’ was not declared in this scope
  848 |             RangeQueryResult* qres = nullptr;
      |                               ^~~~
src/IndexIVF.cpp:856:28: error: invalid use of incomplete type ‘struct vindex::InvertedListScanner’
  856 |                     scanner->set_query(x + i * d);
      |                            ^~
In file included from src/IndexIVF.cpp:1:
include/IndexIVF.hpp:42:10: note: forward declaration of ‘struct vindex::InvertedListScanner’
   42 |   struct InvertedListScanner;
      |          ^~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:868:13: error: ‘RangeSearchPartialResult’ is not a class, namespace, or enumeration
  868 |             RangeSearchPartialResult::merge(all_pres, false);
      |             ^~~~~~~~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::reconstruct(int64_t, float*) const’:
src/IndexIVF.cpp:896:29: error: ‘const struct vindex::DirectMap’ has no member named ‘get’
  896 |     int64_t lo = direct_map.get(key);
      |                             ^~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::search_and_reconstruct(int64_t, const float*, int64_t, float*, int64_t*, float*, const vindex::SearchParameters*) const’:
src/IndexIVF.cpp:965:5: error: ‘ScopeDeleter’ was not declared in this scope
  965 |     ScopeDeleter<int64_t> del(idx);
      |     ^~~~~~~~~~~~
src/IndexIVF.cpp:965:25: error: expected primary-expression before ‘>’ token
  965 |     ScopeDeleter<int64_t> del(idx);
      |                         ^
src/IndexIVF.cpp:965:27: error: ‘del’ was not declared in this scope
  965 |     ScopeDeleter<int64_t> del(idx);
      |                           ^~~
src/IndexIVF.cpp:967:18: error: expected primary-expression before ‘float’
  967 |     ScopeDeleter<float> del2(coarse_dis);
      |                  ^~~~~
src/IndexIVF.cpp: In member function ‘virtual size_t vindex::IndexIVF::remove_ids(const vindex::IDSelector&)’:
src/IndexIVF.cpp:1020:33: error: ‘struct vindex::DirectMap’ has no member named ‘remove_ids’
 1020 |     size_t nremove = direct_map.remove_ids(sel, invlists);
      |                                 ^~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::update_vectors(int, const int64_t*, const float*)’:
src/IndexIVF.cpp:1047:16: error: ‘struct vindex::DirectMap’ has no member named ‘update_codes’
 1047 |     direct_map.update_codes(
      |                ^~~~~~~~~~~~
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::train(int64_t, const float*)’:
src/IndexIVF.cpp:1068:5: error: ‘TransformedVectors’ was not declared in this scope
 1068 |     TransformedVectors tv(
      |     ^~~~~~~~~~~~~~~~~~
src/IndexIVF.cpp:1073:30: error: ‘tv’ was not declared in this scope; did you mean ‘tm’?
 1073 |         quantizer->assign(n, tv.x, assign.data());
      |                              ^~
      |                              tm
src/IndexIVF.cpp:1076:20: error: ‘struct vindex::Index’ has no member named ‘compute_residual_n’; did you mean ‘compute_residual’?
 1076 |         quantizer->compute_residual_n(n, tv.x, residuals.data(), assign.data());
      |                    ^~~~~~~~~~~~~~~~~~
      |                    compute_residual
src/IndexIVF.cpp:1080:26: error: ‘tv’ was not declared in this scope; did you mean ‘tm’?
 1080 |         train_encoder(n, tv.x, nullptr);
      |                          ^~
      |                          tm
In file included from src/IndexIVF.cpp:12:
src/IndexIVF.cpp: In member function ‘virtual void vindex::IndexIVF::check_compatible_for_merge(const vindex::Index&) const’:
src/IndexIVF.cpp:1114:30: error: ‘const struct vindex::DirectMap’ has no member named ‘no’
 1114 |             this->direct_map.no() && other->direct_map.no(),
      |                              ^~
include/VIndexAssert.hpp:93:15: note: in definition of macro ‘VINDEX_THROW_IF_NOT_MSG’
   93 |         if (!(X))                                             \
      |               ^
src/IndexIVF.cpp:1114:56: error: ‘const struct vindex::DirectMap’ has no member named ‘no’
 1114 |             this->direct_map.no() && other->direct_map.no(),
      |                                                        ^~
include/VIndexAssert.hpp:93:15: note: in definition of macro ‘VINDEX_THROW_IF_NOT_MSG’
   93 |         if (!(X))                                             \
      |               ^
src/IndexIVF.cpp: In member function ‘virtual vindex::CodePacker* vindex::IndexIVF::get_CodePacker() const’:
src/IndexIVF.cpp:1138:16: error: expected type-specifier before ‘CodePackerFlat’
 1138 |     return new CodePackerFlat(code_size);
      |                ^~~~~~~~~~~~~~
src/IndexIVF.cpp:1138:15: error: expected ‘;’ before ‘CodePackerFlat’
 1138 |     return new CodePackerFlat(code_size);
      |               ^~~~~~~~~~~~~~~
      |               ;
src/IndexIVF.cpp:1138:16: error: ‘CodePackerFlat’ was not declared in this scope; did you mean ‘CodePacker’?
 1138 |     return new CodePackerFlat(code_size);
      |                ^~~~~~~~~~~~~~
      |                CodePacker
In file included from /usr/include/c++/11/memory:76,
                 from src/IndexIVF.cpp:4:
/usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘void std::default_delete<_Tp>::operator()(_Tp*) const [with _Tp = vindex::InvertedListScanner]’:
/usr/include/c++/11/bits/unique_ptr.h:361:17:   required from ‘std::unique_ptr<_Tp, _Dp>::~unique_ptr() [with _Tp = vindex::InvertedListScanner; _Dp = std::default_delete<vindex::InvertedListScanner>]’
src/IndexIVF.cpp:776:58:   required from here
/usr/include/c++/11/bits/unique_ptr.h:83:23: error: invalid application of ‘sizeof’ to incomplete type ‘vindex::InvertedListScanner’
   83 |         static_assert(sizeof(_Tp)>0,
      |                       ^~~~~~~~~~~
make: *** [Makefile:88: src/IndexIVF.o] Error 1
